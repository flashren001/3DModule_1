# å‡ ä½•æ£€æµ‹ç³»ç»Ÿå®‰è£…æŒ‡å—

## ğŸš€ å¿«é€Ÿå®‰è£…

### æ­¥éª¤ 1: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨ condaï¼ˆæ¨èï¼‰
conda create -n geometry_detection python=3.9
conda activate geometry_detection

# æˆ–ä½¿ç”¨ venv
python -m venv geometry_env
source geometry_env/bin/activate  # Linux/Mac
# æˆ– geometry_env\Scripts\activate  # Windows
```

### æ­¥éª¤ 2: å®‰è£…ä¾èµ–åŒ…

```bash
# å®‰è£…åŸºç¡€ä¾èµ–
pip install -r requirements.txt

# æˆ–é€ä¸ªå®‰è£…ä¸»è¦åŒ…
pip install torch torchvision
pip install stable-baselines3
pip install gymnasium
pip install opencv-python
pip install matplotlib seaborn
pip install scikit-learn scikit-image
```

## ğŸ“¦ è¯¦ç»†ä¾èµ–è¯´æ˜

### 1. stable_baselines3 å®‰è£…

`stable_baselines3` æ˜¯å¼ºåŒ–å­¦ä¹ ç®—æ³•åº“ï¼Œæä¾›PPOã€SACã€DQNç­‰ç®—æ³•ï¼š

```bash
# åŸºç¡€ç‰ˆæœ¬
pip install stable-baselines3

# åŒ…å«é¢å¤–åŠŸèƒ½
pip install stable-baselines3[extra]

# å¼€å‘ç‰ˆæœ¬ï¼ˆä»GitHubï¼‰
pip install git+https://github.com/DLR-RM/stable-baselines3
```

### 2. gymnasium å®‰è£…

æ–°ç‰ˆçš„å¼ºåŒ–å­¦ä¹ ç¯å¢ƒåº“ï¼ˆæ›¿ä»£gymï¼‰ï¼š

```bash
pip install gymnasium

# å¦‚æœéœ€è¦é¢å¤–ç¯å¢ƒ
pip install gymnasium[all]
```

### 3. PyTorch å®‰è£…

æ ¹æ®æ‚¨çš„ç³»ç»Ÿé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼š

```bash
# CPUç‰ˆæœ¬
pip install torch torchvision

# GPUç‰ˆæœ¬ï¼ˆCUDA 11.8ï¼‰
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118

# GPUç‰ˆæœ¬ï¼ˆCUDA 12.1ï¼‰
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu121
```

### 4. OpenCV å®‰è£…

```bash
# æ ‡å‡†ç‰ˆæœ¬
pip install opencv-python

# åŒ…å«é¢å¤–åŠŸèƒ½
pip install opencv-contrib-python
```

## ğŸ”§ å¯¼å…¥ä½¿ç”¨æ–¹æ³•

### stable_baselines3 æ­£ç¡®å¯¼å…¥

```python
# åŸºæœ¬ç®—æ³•
from stable_baselines3 import PPO, SAC, DQN, A2C, TD3

# ç¯å¢ƒç›¸å…³
from stable_baselines3.common.env_util import make_vec_env
from stable_baselines3.common.vec_env import DummyVecEnv

# å›è°ƒå’Œå·¥å…·
from stable_baselines3.common.callbacks import BaseCallback, EvalCallback
from stable_baselines3.common.utils import set_random_seed
from stable_baselines3.common.evaluation import evaluate_policy

# ç­–ç•¥ç½‘ç»œ
from stable_baselines3.common.policies import ActorCriticPolicy
```

### gymnasium æ­£ç¡®å¯¼å…¥

```python
# æ–°ç‰ˆ gymnasiumï¼ˆæ¨èï¼‰
import gymnasium as gym
from gymnasium import spaces

# æ—§ç‰ˆ gymï¼ˆå…¼å®¹æ€§ï¼‰
import gym
from gym import spaces
```

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1: stable_baselines3 å¯¼å…¥é”™è¯¯

```bash
ImportError: No module named 'stable_baselines3'
```

**è§£å†³æ–¹æ³•:**
```bash
# ç¡®è®¤å®‰è£…
pip list | grep stable

# é‡æ–°å®‰è£…
pip uninstall stable-baselines3
pip install stable-baselines3

# æ£€æŸ¥Pythonç¯å¢ƒ
which python
which pip
```

### é—®é¢˜2: gymnasium vs gym å†²çª

```bash
AttributeError: module 'gym' has no attribute 'make'
```

**è§£å†³æ–¹æ³•:**
```bash
# å¸è½½æ—§ç‰ˆgymï¼Œå®‰è£…gymnasium
pip uninstall gym
pip install gymnasium

# æˆ–åŒæ—¶å®‰è£…ï¼ˆå¯èƒ½æœ‰å…¼å®¹é—®é¢˜ï¼‰
pip install gym gymnasium
```

### é—®é¢˜3: PyTorch CUDA ä¸å¯ç”¨

```bash
RuntimeError: CUDA not available
```

**è§£å†³æ–¹æ³•:**
```bash
# æ£€æŸ¥CUDAç‰ˆæœ¬
nvidia-smi

# å®‰è£…å¯¹åº”CUDAç‰ˆæœ¬çš„PyTorch
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
```

### é—®é¢˜4: OpenCV å¯¼å…¥é”™è¯¯

```bash
ImportError: libGL.so.1: cannot open shared object file
```

**è§£å†³æ–¹æ³•ï¼ˆLinuxï¼‰:**
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install libgl1-mesa-glx

# CentOS/RHEL
sudo yum install mesa-libGL
```

## ğŸ“‹ ç‰ˆæœ¬å…¼å®¹æ€§

### Python ç‰ˆæœ¬è¦æ±‚
- Python 3.8 - 3.11ï¼ˆæ¨è 3.9 æˆ– 3.10ï¼‰

### ä¸»è¦ä¾èµ–ç‰ˆæœ¬
```
torch >= 2.0.0
stable-baselines3 >= 2.0.0
gymnasium >= 0.28.0
opencv-python >= 4.8.0
numpy >= 1.24.0
```

## ğŸ§ª éªŒè¯å®‰è£…

åˆ›å»ºæµ‹è¯•è„šæœ¬ `test_installation.py`ï¼š

```python
#!/usr/bin/env python3

def test_imports():
    """æµ‹è¯•æ‰€æœ‰å…³é”®ä¾èµ–çš„å¯¼å…¥"""
    try:
        # æµ‹è¯•PyTorch
        import torch
        print(f"âœ… PyTorch {torch.__version__}")
        print(f"   CUDA available: {torch.cuda.is_available()}")
        
        # æµ‹è¯•stable_baselines3
        from stable_baselines3 import PPO
        print("âœ… stable_baselines3")
        
        # æµ‹è¯•gymnasium
        import gymnasium as gym
        print("âœ… gymnasium")
        
        # æµ‹è¯•OpenCV
        import cv2
        print(f"âœ… OpenCV {cv2.__version__}")
        
        # æµ‹è¯•å…¶ä»–ä¾èµ–
        import numpy as np
        print(f"âœ… NumPy {np.__version__}")
        
        import matplotlib
        print(f"âœ… Matplotlib {matplotlib.__version__}")
        
        print("\nğŸ‰ æ‰€æœ‰ä¾èµ–å®‰è£…æˆåŠŸï¼")
        return True
        
    except ImportError as e:
        print(f"âŒ å¯¼å…¥é”™è¯¯: {e}")
        return False

if __name__ == "__main__":
    test_imports()
```

è¿è¡Œæµ‹è¯•ï¼š
```bash
python test_installation.py
```

## ğŸ³ Docker ç¯å¢ƒï¼ˆæ¨èï¼‰

å¦‚æœé‡åˆ°ä¾èµ–é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨Dockerï¼š

```dockerfile
FROM python:3.9-slim

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    libgl1-mesa-glx \
    libglib2.0-0 \
    libsm6 \
    libxext6 \
    libxrender-dev \
    libgomp1 \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£…Pythonä¾èµ–
COPY requirements.txt .
RUN pip install -r requirements.txt

WORKDIR /app
COPY . .

CMD ["python", "main.py", "--demo"]
```

æ„å»ºå’Œè¿è¡Œï¼š
```bash
docker build -t geometry-detection .
docker run geometry-detection
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥é”™è¯¯æ—¥å¿—**: ä»”ç»†é˜…è¯»é”™è¯¯ä¿¡æ¯
2. **æ›´æ–°pip**: `pip install --upgrade pip`
3. **æ¸…ç†ç¼“å­˜**: `pip cache purge`
4. **é‡æ–°åˆ›å»ºç¯å¢ƒ**: åˆ é™¤è™šæ‹Ÿç¯å¢ƒé‡æ–°åˆ›å»º
5. **æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£**:
   - [stable_baselines3](https://stable-baselines3.readthedocs.io/)
   - [gymnasium](https://gymnasium.farama.org/)
   - [PyTorch](https://pytorch.org/get-started/locally/)

---

**å®‰è£…æˆåŠŸåï¼Œæ‚¨å°±å¯ä»¥è¿è¡Œæ¼”ç¤ºäº†ï¼š**
```bash
python main.py --demo
```